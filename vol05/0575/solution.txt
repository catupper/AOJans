問題番号:AOJ0575
問題名:JOI国のお祭り事情

解説:
まずダイクストラ法で、各街の最寄りのお祭りまでの距離を出す。
経路の中で街Aと街Bを結ぶ辺を使うということはその経路は多くともmin(A,B)の距離になるので、各辺に両端の街のコストのうち小さい方をもたせる。
もしコストがX以上の辺だけで街Aと街Bが結ばれているならば、コストX未満の街Aと街Bを結ぶ辺はいらないので、最大全域木を形成することで、使う辺の数をしぼれる。また、グラフが木になるので、街Aから街Bまでのお祭りまでの距離は、最も深い共通の先祖をCとすると、AC間の距離とBC間の距離のうち小さい方である。
共通先祖をみつける方法はいくつかあるが、挙げているコードではダブリングという手法を使っている。これは各頂点に対して2^N回親をたどった先にある頂点を保存しておくことで、先祖方向への走査が効率良くなるというものである。2^N回親までの経路のお祭りとの距離も同様に保存することができる。

アルゴリズム:
ダイクストラ
最大全域木
LCA

オーダー:
O((M+Q)logN)
M = 道の数
N = 街の数
Q = クエリの数
