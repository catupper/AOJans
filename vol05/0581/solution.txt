問題番号:AOJ0581
問題名:お土産購入計画

解説:
ちょっとだけ回り道することがゆるされているが、「過去に回り道した回数」も頂点情報に加えれば、DAGになるので、普通のDPやDFSで解ける。
と思いきや、2回以上同じおみやげ屋にいっても二回買えないという条件がついているので、厄介。ただ回り道の許容回数が3なので、過去6回の動きを保存しておけば、一度そこに訪れたかどうか判断することができる。bitDPすればよい。

dp[x][y][d][last] = 場所x,yでのこりd回まわりみちしたあとに、過去6回の動きがlastであるような場合の帰るおみやげの個数の最大値
というDPを考えれば良い。

アルゴリズム:
bitDP

オーダー:
O(2^12*HWK)
H = 縦のながさ
W = 横の長さ
K = 回り道の回数
